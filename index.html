<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Simulador de Empr√©stimo PRO com c√°lculo unificado e faixas de pre√ßo.">
    <meta name="theme-color" content="#1a73e8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Simulador de Empr√©stimo PRO</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192x192.png">
</head>
<body>
    <div id="app-container">
        <header class="app-header">
            <div class="logo-area" id="logo-area" title="Simulador PRO"><span>Simulador PRO</span></div>
            <div class="progress-bar">
                <div class="progress-step active" data-step="1"><div class="step-icon">1</div><div class="step-label">Faixa</div></div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2"><div class="step-icon">2</div><div class="step-label">Dados & Valor</div></div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3"><div class="step-icon">3</div><div class="step-label">Parcelas</div></div>
                <Êñ∞ÂçéÁ§æ group="progress-line"></div>
                <div class="progress-step" data-step="4"><div class="step-icon">4</div><div class="step-label">Resumo</div></div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="5"><div class="step-icon">5</div><div class="step-label">Contrato</div></div>
            </div>
            <div class="controls-area">
                <button class="btn hidden" id="prev-settings-btn" title="Configura√ß√µes">‚öôÔ∏è</button>
                <button class="btn" id="theme-toggle-btn" title="Alternar Tema">üåô</button>
            </div>
        </header>

        <main class="container">
            <!-- Pop-up Alerta -->
            <div id="alert-overlay" class="overlay hidden">
                <div class="alert-box">
                    <h2 id="alert-title"></h2>
                    <p id="alert-message"></p>
                    <button id="alert-ok-btn" class="btn btn-primary">OK</button>
                </div>
            </div>

            <!-- Painel Admin e Senha -->
            <div id="admin-password-overlay" class="admin-password-overlay hidden">
                <div class="password-box">
                    <h4>Acesso Administrador</h4>
                    <label for="admin-password-input">Senha:</label>
                    <input type="password" id="admin-password-input" autocomplete="current-password">
                    <span class="validation-message error-message" id="admin-password-error"></span>
                    <div class="admin-actions">
                        <button id="admin-cancel-btn" class="btn btn-secondary">Cancelar</button>
                        <button id="admin-login-btn" class="btn btn-primary">Entrar</button>
                    </div>
                </div>
            </div>
            <div id="admin-settings" class="admin-settings-panel">
                <div class="admin-header">
                    <h3>Configura√ß√µes</h3>
                    <button id="admin-close-panel-btn" class="btn close-btn" title="Fechar">√ó</button>
                </div>
                <div class="settings-form">
                    <h4>Dados do Credor</h4>
                    <div class="form-grid">
                        <div><label for="admin_credor_nome">Nome Completo:</label><input type="text" id="admin_credor_nome"></div>
                        <div><label for="admin_credor_cpf_cnpj">CPF/CNPJ:</label><input type="text" id="admin_credor_cpf_cnpj"></div>
                        <div><label for="admin_credor_contato_tel">Telefone (com DDI):</label><input type="text" id="admin_credor_contato_tel" placeholder="5544998408460"></div>
                        <div><label for="admin_contrato_cidade">Cidade Contrato:</label><input type="text" id="admin_contrato_cidade"></div>
                        <div><label for="admin_contrato_estado">Estado (UF):</label><input type="text" id="admin_contrato_estado"></div>
                    </div>
                    <h4>Par√¢metros Financeiros</h4>
                    <div class="form-grid">
                        <div><label for="admin_taxa_juros_inicial">Taxa de Juros Inicial (3x, % a.m.):</label><input type="number" step="0.01" id="admin_taxa_juros_inicial"></div>
                        <div><label for="admin_taxa_juros_final">Taxa de Juros Final (36x, % a.m.):</label><input type="number" step="0.01" id="admin_taxa_juros_final"></div>
                        <div><label for="admin_iof_fixo">IOF Fixo (%):</label><input type="number" step="0.01" id="admin_iof_fixo"></div>
                        <div><label for="admin_iof_diario">IOF Di√°rio (%):</label><input type="number" step="0.0001" id="admin_iof_diario"></div>
                    </div>
                </div>
                <div class="admin-actions">
                    <button id="admin-save-settings-btn" class="btn btn-primary">Salvar e Fechar</button>
                </div>
            </div>

            <!-- Etapas do Fluxo -->
            <div class="etapa-content">
                <div id="etapa1" class="etapa ativa">
                    <div class="card">
                        <h2 class="card-header">1. Selecione a faixa desejada</h2>
                        <div class="card-body">
                            <form id="form-faixa-preco">
                                <details open>
                                    <summary>Valores at√© R$ 2.000</summary>
                                    <div class="faixa-opcao">
                                        <label><input type="radio" name="faixa_valor" data-min="10" data-max="499.99"> R$ 10,00 a R$ 499,99</label>
                                        <label><input type="radio" name="faixa_valor" data-min="500" data-max="999.99"> R$ 500,00 a R$ 999,99</label>
                                        <label><input type="radio" name="faixa_valor" data-min="1000" data-max="1499.99"> R$ 1.000,00 a R$ 1.499,99</label>
                                        <label><input type="radio" name="faixa_valor" data-min="1500" data-max="1999.99"> R$ 1.500,00 a R$ 1.999,99</label>
                                    </div>
                                </details>
                                <details>
                                    <summary>Valores at√© R$ 5.000</summary>
                                    <div class="faixa-opcao">
                                        <label><input type="radio" name="faixa_valor" data-min="2000" data-max="2499.99"> R$ 2.000,00 a R$ 2.499,99</label>
                                        <label><input type="radio" name="faixa_valor" data-min="2500" data-max="2999.99"> R$ 2.500,00 a R$ 2.999,99</label>
                                        <label><input type="radio" name="faixa_valor" data-min="3000" data-max="3499.99"> R$ 3.000,00 a R$ 3.499,99</label>
                                        <label><input type="radio" name="faixa_valor" data-min="3500" data-max="3999.99"> R$ 3.500,00 a R$ 3.999,99</label>
                                        <label><input type="radio" name="faixa_valor" data-min="4000" data-max="4999.99"> R$ 4.000,00 a R$ 4.999,99</label>
                                    </div>
                                </details>
                                <details>
                                    <summary>Valores Altos</summary>
                                    <div class="faixa-opcao">
                                        <label><input type="radio" name="faixa_valor" data-min="5000" data-max="999999"> Acima de R$ 5.000,00</label>
                                    </div>
                                </details>
                            </form>
                            <span class="validation-message error-message" id="etapa1-validation"></span>
                        </div>
                    </div>
                </div>

                <div id="etapa2" class="etapa">
                    <div class="card">
                        <h2 class="card-header">2. Seus Dados e Valor Exato</h2>
                        <div class="card-body">
                            <div class="form-group">
                                <label for="valor-emprestimo">Valor Exato Desejado</label>
                                <input type="number" id="valor-emprestimo" placeholder="Ex: 500" required step="0.01" inputmode="decimal">
                                <small id="limite-valor-info" class="info-text"></small>
                                <div class="preset-buttons">
                                    <button type="button" class="preset-btn btn btn-outline-secondary btn-sm" data-action="add" data-value="50">+50</button>
                                    <button type="button" class="preset-btn btn btn-outline-secondary btn-sm" data-action="add" data-value="100">+100</button>
                                    <button type="button" class="preset-btn btn btn-outline-secondary btn-sm" data-action="add" data-value="200">+200</button>
                                    <button type="button" class="preset-btn btn btn-outline-secondary btn-sm" data-action="add" data-value="500">+500</button>
                                    <button type="button" class="preset-btn multiplier btn btn-outline-secondary btn-sm" data-action="multiply" data-value="2">x2</button>
                                    <button type="button" class="preset-btn clear btn btn-outline-danger btn-sm" data-action="clear">Limpar</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="nome-completo-cliente">Nome Completo</label>
                                <input type="text" id="nome-completo-cliente" required autocomplete="name">
                            </div>
                            <div class="form-group">
                                <label for="cpf-cliente">CPF</label>
                                <input type="text" id="cpf-cliente" required placeholder="000.000.000-00" maxlength="14" inputmode="numeric">
                            </div>
                            <div class="form-group">
                                <label for="endereco-cliente">Endere√ßo Completo</label>
                                <input type="text" id="endereco-cliente" required placeholder="Rua, N√∫mero, Bairro, Cidade, Estado, CEP">
                            </div>
                            <div class="form-group">
                                <label>Dia Preferencial para Pagamento</label>
                                <div class="dias-pagamento-botoes">
                                    <button type="button" class="btn-dia" data-dia="5">05</button>
                                    <button type="button" class="btn-dia" data-dia="10">10</button>
                                    <button type="button" class="btn-dia" data-dia="15">15</button>
                                    <button type="button" class="btn-dia" data-dia="20">20</button>
                                    <button type="button" class="btn-dia" data-dia="25">25</button>
                                    <button type="button" class="btn-dia" data-dia="30">30</button>
                                </div>
                                <div id="info-vencimento" class="info-vencimento-box hidden"></div>
                            </div>
                            <span class="validation-message error-message" id="etapa2-validation"></span>
                        </div>
                    </div>
                </div>

                <div id="etapa3" class="etapa">
                    <div class="card">
                        <h2 class="card-header">3. Op√ß√µes de Parcelamento</h2>
                        <div class="card-body">
                            <div id="container-pagamento-mensal" class="opcoes-container-mensal"></div>
                            <span class="validation-message error-message" id="etapa3-validation"></span>
                        </div>
                    </div>
                </div>

                <div id="etapa4" class="etapa">
                    <div class="card">
                        <h2 class="card-header">4. Resumo da Simula√ß√£o</h2>
                        <div class="card-body">
                            <div id="resumo-container"><p>Selecione uma op√ß√£o de pagamento para ver o resumo.</p></div>
                        </div>
                    </div>
                </div>

                <div id="etapa5" class="etapa">
                    <div class="card">
                        <h2 class="card-header">5. Contrato de M√∫tuo</h2>
                        <div class="card-body">
                            <div id="contrato-area">
                                <div id="contrato-texto">Carregando termos...</div>
                                <div id="contrato-aceite">
                                    <label><input type="checkbox" id="aceito-contrato"> Declaro que li e aceito integralmente os termos e condi√ß√µes apresentados.</label>
                                    <span class="validation-message error-message" id="contrato-validation"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="etapa-footer">
                <button id="btn-reiniciar" class="btn btn-secondary">‚Üª Reiniciar</button>
                <div>
                    <button id="btn-voltar" class="btn btn-secondary hidden">‚Üê Voltar</button>
                    <button id="btn-avancar" class="btn btn-primary" disabled>Avan√ßar ‚Üí</button>
                    <button id="btn-finalizar-whatsapp" class="btn btn-whatsapp hidden">‚úì Finalizar e Enviar via WhatsApp</button>
                </div>
            </footer>
        </main>
    </div>

    <!-- Template do Contrato -->
    <template id="contrato-template">
        <h4>CONTRATO DE M√öTUO FINANCEIRO</h4>
        <p><strong>Contrato N¬∫:</strong> [CONTRATO_NUMERO]<br><strong>Data de Celebra√ß√£o:</strong> [DATA_ORCAMENTO_FORMATADA]</p>
    
        <h4>PARTES CONTRATANTES:</h4>
        <p><strong>MUTUANTE (Credor):</strong><br>
        Nome: [NOME_COMPLETO_DO_CREDOR]<br>
        CPF/CNPJ: [CPF_CNPJ_DO_CREDOR]<br>
        Endere√ßo: [ENDERECO_CREDOR]<br>
        Contato: [TELEFONE_DO_CREDOR]</p>
    
        <p><strong>MUTU√ÅRIO (Devedor):</strong><br>
        Nome: [NOME_CLIENTE_COMPLETO]<br>
        CPF: [CPF_CLIENTE]<br>
        Endere√ßo: [ENDERECO_CLIENTE]</p>
    
        <h4>CL√ÅUSULA PRIMEIRA ‚Äì DO OBJETO</h4>
        <p>1.1. O presente contrato tem por objeto o m√∫tuo (empr√©stimo) da quantia de [VALOR_SOLICITADO_FORMATADO] ([VALOR_SOLICITADO_EXTENSO]), que o MUTUANTE entrega e transfere ao MUTU√ÅRIO nesta data, em moeda corrente nacional.<br>
        1.2. O MUTU√ÅRIO declara ter recebido o valor integral descrito no item 1.1, servindo este instrumento como prova e quita√ß√£o do ato de entrega do montante.</p>
    
        <h4>CL√ÅUSULA SEGUNDA ‚Äì DO PAGAMENTO E CONDI√á√ïES</h4>
        <p>2.1. O MUTU√ÅRIO se compromete a restituir o valor mutuado, acrescido dos encargos financeiros pactuados, totalizando o montante de [VALOR_TOTAL_PAGO_FORMATADO] ([VALOR_TOTAL_PAGO_EXTENSO]).<br>
        2.2. O pagamento ser√° realizado em [NUMERO_PARCELAS] ([NUMERO_PARCELAS_EXTENSO]) parcelas mensais e consecutivas, no valor de [VALOR_PARCELA_FORMATADO] cada uma.<br>
        2.3. As datas de vencimento das parcelas ser√£o todo dia [DIA_PAGAMENTO] de cada m√™s, iniciando-se a primeira em [DATA_PRIMEIRO_VENCIMENTO_PARCELADO] e a √∫ltima em [DATA_ULTIMO_VENCIMENTO_PARCELADO].</p>
    
        <h4>CL√ÅUSULA TERCEIRA ‚Äì DA FORMA DE PAGAMENTO</h4>
        <p>3.1. Os pagamentos dever√£o ser realizados por um dos seguintes meios, √† escolha do MUTU√ÅRIO:<br>
        a) PIX: Chave CPF [CPF_CREDOR] ou Chave Celular [TELEFONE_CREDOR], de titularidade do MUTUANTE.<br>
        b) Dep√≥sito ou transfer√™ncia banc√°ria: A combinar com o MUTUANTE.<br>
        c) Em esp√©cie: Diretamente ao MUTUANTE, mediante emiss√£o de recibo detalhado no ato do pagamento.<br>
        3.2. Compete ao MUTU√ÅRIO a responsabilidade de obter e arquivar os comprovantes de cada pagamento realizado.</p>
    
        <h4>CL√ÅUSULA QUARTA ‚Äì DO INADIMPLEMENTO E PENALIDADES</h4>
        <p>4.1. O n√£o pagamento de qualquer parcela na data de seu respectivo vencimento configurar√° a mora do MUTU√ÅRIO, independentemente de qualquer aviso ou notifica√ß√£o, sujeitando-o aos seguintes encargos, calculados sobre o valor da parcela em atraso:<br>
        a) Multa Morat√≥ria: Percentual fixo de 20% (vinte por cento).<br>
        b) Juros de Mora: Taxa de 10% (dez por cento) ao m√™s, calculados pro rata die.<br>
        <strong>Exemplo de C√°lculo para Atraso de 30 Dias:</strong><br>
        Parcela: [VALOR_PARCELA_FORMATADO]<br>
        Multa (20%): [MULTA_EXEMPLO]<br>
        Juros (10% por 30 dias): [JUROS_EXEMPLO]<br>
        Total com Atraso: [TOTAL_ATRASO_EXEMPLO]</p>
    
        <h4>CL√ÅUSULA QUINTA ‚Äì DO VENCIMENTO ANTECIPADO DA D√çVIDA</h4>
        <p>5.1. Ocorrer√° o vencimento antecipado de toda a d√≠vida, tornando-se imediatamente exig√≠vel o saldo devedor total, acrescido das penalidades previstas na Cl√°usula Quarta, nas seguintes hip√≥teses:<br>
        a) Atraso no pagamento de qualquer parcela por um per√≠odo superior a 30 (trinta) dias;<br>
        b) Se o MUTU√ÅRIO tiver qualquer t√≠tulo protestado ou for declarado insolvente.<br>
        5.2. O n√£o exerc√≠cio pelo MUTUANTE do direito de exigir o vencimento antecipado ser√° considerado mera liberalidade, n√£o constituindo nova√ß√£o ou ren√∫ncia de direitos.</p>
    
        <h4>CL√ÅUSULA SEXTA ‚Äì DAS DISPOSI√á√ïES GERAIS</h4>
        <p>6.1. Este contrato √© celebrado em car√°ter irrevog√°vel e irretrat√°vel, obrigando as partes, seus herdeiros e sucessores.<br>
        6.2. Toda e qualquer comunica√ß√£o, transa√ß√£o e comprovante trocados entre as partes por meios digitais, como WhatsApp, e-mail ou outros aplicativos de mensagem, s√£o reconhecidos como v√°lidos e poder√£o ser utilizados como meio de prova para todos os fins de direito.<br>
        6.3. A eventual toler√¢ncia por parte do MUTUANTE quanto ao n√£o cumprimento de qualquer obriga√ß√£o n√£o implicar√° ren√∫ncia, nova√ß√£o ou altera√ß√£o das cl√°usulas aqui pactuadas.</p>
    
        <h4>CL√ÅUSULA S√âTIMA ‚Äì DO FORO</h4>
        <p>7.1. Para dirimir quaisquer controv√©rsias oriundas deste contrato, as partes elegem o foro da Comarca de [CIDADE_CONTRATO], Estado do [ESTADO_CONTRATO], renunciando a qualquer outro, por mais privilegiado que seja.</p>
    
        <p><strong>Palotina - PR, [DATA_ORCAMENTO_FORMATADA]</strong></p>
    </template>

    <script src="script.js"></script>
</body>
</html>
