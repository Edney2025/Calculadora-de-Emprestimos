<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Empr√©stimo PRO</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="theme-dark">

    <div id="app-container">
        <header class="app-header">
            <div class="logo-area"> <span>Simulador PRO</span> </div>
            <div class="progress-bar">
                <div class="progress-step active" data-step="1"> <div class="step-icon">1</div><div class="step-label">Faixa</div> </div> <div class="progress-line"></div>
                <div class="progress-step" data-step="2"> <div class="step-icon">2</div><div class="step-label">Dados</div> </div> <div class="progress-line"></div>
                <div class="progress-step" data-step="3"> <div class="step-icon">3</div><div class="step-label">Pagamento</div> </div> <div class="progress-line"></div>
                <div class="progress-step" data-step="4"> <div class="step-icon">4</div><div class="step-label">Resumo</div> </div> <div class="progress-line"></div>
                <div class="progress-step" data-step="5"> <div class="step-icon">5</div><div class="step-label">Contrato</div> </div>
            </div>
            <div class="controls-area">
                 <button class="icon-btn" title="Configura√ß√µes (Admin)" id="admin-open-password-prompt-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="18" height="18"><path d="M10 3.75a2 2 0 1 0 0 4 2 2 0 0 0 0-4ZM10 8.75a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7ZM10 17.5a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" /></svg>
                 </button>
                <button class="icon-btn" id="theme-toggle-light" title="Tema Claro">‚òÄÔ∏è</button>
                <button class="icon-btn" id="theme-toggle-dark" title="Tema Escuro">üåô</button>
            </div>
        </header>

        <main class="container">
            <!-- Painel Admin -->
            <div id="admin-password-overlay" class="admin-password-overlay hidden">
                 <div class="password-box">
                    <h4>Acesso Administrador</h4>
                    <label for="admin-password-input">Senha:</label>
                    <input type="password" id="admin-password-input" inputmode="text">
                    <span class="validation-message error-message" id="admin-password-error"></span>
                    <div class="password-actions">
                        <button id="admin-cancel-btn" class="btn btn-secondary btn-sm">Cancelar</button>
                        <button id="admin-login-btn" class="btn btn-primary btn-sm">Entrar</button>
                    </div>
                 </div>
            </div>
             <div id="admin-settings" class="admin-settings-panel hidden">
                <div class="admin-header"><h3>Configura√ß√µes</h3><button id="admin-close-panel-btn" class="icon-btn close-btn" title="Fechar">X</button></div>
                 <div class="settings-form">
                    <h4>Dados do Credor</h4>
                    <div class="form-grid">
                        <div><label for="admin_credor_nome">Nome Completo:</label><input type="text" id="admin_credor_nome"></div>
                        <div><label for="admin_credor_cpf_cnpj">CPF/CNPJ:</label><input type="text" id="admin_credor_cpf_cnpj"></div>
                        <div><label for="admin_credor_contato_tel">Telefone:</label><input type="text" id="admin_credor_contato_tel"></div>
                        <div><label for="admin_credor_contato_email">E-mail:</label><input type="email" id="admin_credor_contato_email"></div>
                        <div><label for="admin_contrato_cidade">Cidade Contrato:</label><input type="text" id="admin_contrato_cidade"></div>
                        <div><label for="admin_contrato_estado">Estado Contrato (UF):</label><input type="text" id="admin_contrato_estado"></div>
                    </div>
                    <h4>Configura√ß√£o de Taxas (%)</h4>
                    <div class="form-grid">
                        <div><label for="admin_taxa_parcelado_3x">Tx Parc. (3x):</label><input type="number" step="0.01" id="admin_taxa_parcelado_3x"></div>
                        <div><label for="admin_taxa_parcelado_48x">Tx Parc. (48x):</label><input type="number" step="0.01" id="admin_taxa_parcelado_48x"></div>
                    </div>
                    <div class="form-grid">
                        <div><label for="admin_taxa_diario1_ini">Tx Di√°rio (Dia 1):</label><input type="number" step="0.01" id="admin_taxa_diario1_ini"></div>
                        <div><label for="admin_taxa_diario1_fim">Tx Di√°rio (Dia 30):</label><input type="number" step="0.01" id="admin_taxa_diario1_fim"></div>
                        <div><label for="admin_taxa_diario2_ini">Tx Di√°rio (Dia 31):</label><input type="number" step="0.01" id="admin_taxa_diario2_ini"></div>
                        <div><label for="admin_taxa_diario2_fim">Tx Di√°rio (Dia 60):</label><input type="number" step="0.01" id="admin_taxa_diario2_fim"></div>
                    </div>
                    <h4>Limites (R$)</h4>
                    <div class="form-grid">
                         <div><label for="admin_limite_valor_diario">Limite Pgto. Di√°rio:</label><input type="number" step="any" id="admin_limite_valor_diario"></div>
                         <div></div>
                    </div>
                 </div>
                 <div class="admin-actions">
                     <button id="admin-cancel-settings-btn" class="btn btn-secondary btn-sm">Cancelar</button>
                     <button id="admin-save-settings-btn" class="btn btn-success btn-sm">Salvar</button>
                 </div>
             </div>

            <!-- Etapa 1: Faixa de Valor -->
            <div id="etapa1" class="etapa ativa">
                 <div class="card">
                    <h2 class="card-header">1. Faixa de Valor do Empr√©stimo</h2>
                    <div class="card-body">
                        <div class="info-box"> üìå Escolha a faixa de valor que voc√™ precisa. </div>
                        <form id="form-faixa-preco">
                            <details open>
                                <summary>‚ñº R$ 10,00 a R$ 2.000,00</summary>
                                <div class="faixa-opcao">
                                    <label><input type="radio" name="faixa_valor" value="250" data-faixa-desc="R$ 10,00 a R$ 499,99" data-limite="500" required> R$ 10,00 √° 499,99 (Prazo: At√© 10 Dias)</label>
                                    <label><input type="radio" name="faixa_valor" value="500" data-faixa-desc="R$ 500,00 a R$ 999,99" data-limite="1000"> R$ 500,00 √° 999,99 (Prazo: At√© 20 Dias)</label>
                                    <label><input type="radio" name="faixa_valor" value="1000" data-faixa-desc="R$ 1.000,00 a R$ 1.499,99" data-limite="1500"> R$ 1.000,00 √° 1.499,99 (Prazo: At√© 30 Dias)</label>
                                    <label><input type="radio" name="faixa_valor" value="1500" data-faixa-desc="R$ 1.500,00 a R$ 1.999,99" data-limite="2000"> R$ 1.500,00 √° 1.999,99 (Prazo: At√© 40 Dias)</label>
                                </div>
                            </details>
                            <details>
                                 <summary>‚ñº R$ 2.000,00 a R$ 3.500,00</summary>
                                 <div class="faixa-opcao">
                                     <label><input type="radio" name="faixa_valor" value="2000" data-faixa-desc="R$ 2.000,00 a R$ 2.499,99" data-limite="2500"> R$ 2.000,00 √° 2.499,99 (Prazo: At√© 65 Dias)</label>
                                     <label><input type="radio" name="faixa_valor" value="2500" data-faixa-desc="R$ 2.500,00 a R$ 2.999,99" data-limite="3000"> R$ 2.500,00 √° 2.999,99 (Prazo: At√© 70 Dias)</label>
                                     <label><input type="radio" name="faixa_valor" value="3000" data-faixa-desc="R$ 3.000,00 a R$ 3.499,99" data-limite="3500"> R$ 3.000,00 √° 3.499,99 (Prazo: At√© 75 Dias)</label>
                                 </div>
                             </details>
                             <details>
                                 <summary>‚ñº R$ 3.500,00 a R$ 5.000,00</summary>
                                 <div class="faixa-opcao">
                                     <label><input type="radio" name="faixa_valor" value="3500" data-faixa-desc="R$ 3.500,00 a R$ 3.999,99" data-limite="4000"> R$ 3.500,00 √° 3.999,99 (Prazo: At√© 80 Dias)</label>
                                     <label><input type="radio" name="faixa_valor" value="4000" data-faixa-desc="R$ 4.000,00 a R$ 4.499,99" data-limite="4500"> R$ 4.000,00 √° 4.499,99 (Prazo: At√© 85 Dias)</label>
                                     <label><input type="radio" name="faixa_valor" value="4500" data-faixa-desc="R$ 4.500,00 a R$ 4.999,99" data-limite="5000"> R$ 4.500,00 √° 4.999,99 (Prazo: At√© 90 Dias)</label>
                                 </div>
                             </details>
                            <details>
                                <summary>‚ñº Acima de R$ 5.000,00</summary>
                                <div class="faixa-opcao">
                                    <label><input type="radio" name="faixa_valor" value="5000" data-faixa-desc="Acima de R$ 5.000,00" data-limite="999999"> Acima de R$ 5.000,00 (An√°lise individual)</label>
                                </div>
                            </details>
                        </form>
                        <div class="navigation-buttons">
                            <button id="btn-ir-para-etapa2" class="btn btn-primary" disabled>Avan√ßar para Dados Pessoais ‚Üí</button>
                        </div>
                    </div>
                 </div>
            </div>

            <!-- Etapa 2: Dados Pessoais -->
            <div id="etapa2" class="etapa">
                 <div class="card">
                    <h2 class="card-header">2. Dados Pessoais e Valor</h2>
                    <div class="card-body">
                        <form id="form-dados-pessoais">
                            <div class="form-row">
                                <div><label for="nome-completo-cliente">Nome Completo:</label><input type="text" id="nome-completo-cliente" required></div>
                                <div><label for="cpf-cliente">CPF:</label><input type="text" id="cpf-cliente" required placeholder="000.000.000-00" maxlength="14"></div>
                            </div>
                            <div class="input-group">
                                <label>Valor Desejado (R$): <span id="limite-valor-info" class="info-text"></span></label>
                                <div id="valor-display" tabindex="0" title="Clique para editar">R$ 0,00</div>
                                <span class="validation-message" id="valor-validation"></span>
                            </div>
                            <div class="preset-buttons">
                                <button type="button" class="btn-preset btn btn-outline-secondary btn-sm" data-action="add" data-value="50">+50</button>
                                <button type="button" class="btn-preset btn btn-outline-secondary btn-sm" data-action="add" data-value="100">+100</button>
                                <button type="button" class="btn-preset btn btn-outline-secondary btn-sm" data-action="add" data-value="500">+500</button>
                                <button type="button" class="btn-preset btn btn-outline-danger btn-sm" data-action="clear">Limpar</button>
                            </div>
                            <div class="input-group">
                                <label>Qual o melhor dia para o vencimento?</label>
                                <div class="dias-pagamento-botoes">
                                    <button type="button" class="btn-dia btn btn-outline-secondary" data-dia="5">05</button>
                                    <button type="button" class="btn-dia btn btn-outline-secondary" data-dia="10">10</button>
                                    <button type="button" class="btn-dia btn btn-outline-secondary" data-dia="15">15</button>
                                    <button type="button" class="btn-dia btn btn-outline-secondary" data-dia="20">20</button>
                                    <button type="button" class="btn-dia btn btn-outline-secondary" data-dia="25">25</button>
                                    <button type="button" class="btn-dia btn btn-outline-secondary" data-dia="30">30</button>
                                </div>
                                <div id="info-vencimento" class="info-vencimento-box" style="display: none;"></div>
                            </div>
                            <span class="validation-message error-message" id="etapa2-validation"></span>
                        </form>
                        <div class="navigation-buttons">
                            <button id="btn-voltar-para-etapa1" class="btn btn-secondary">‚Üê Voltar</button>
                            <button id="btn-ir-para-etapa3" class="btn btn-primary" disabled>Ver Op√ß√µes de Pagamento ‚Üí</button>
                        </div>
                    </div>
                 </div>
            </div>

            <!-- Etapa 3: Op√ß√µes de Pagamento -->
            <div id="etapa3" class="etapa">
                 <div class="card">
                    <h2 class="card-header">3. Op√ß√µes de Pagamento</h2>
                    <div class="card-body">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-target="resultado-parcelado">Mensal (Parcelado)</button>
                            <button class="tab-btn" data-target="resultado-diario">Di√°rio (Quita√ß√£o)</button>
                        </div>

                        <div id="resultado-parcelado" class="resultado-area active">
                            <div class="opcoes-container" id="container-parcelado"><div class="loading-placeholder">Calculando...</div></div>
                        </div>

                        <div id="resultado-diario" class="resultado-area">
                            <div class="info-box warning-message" id="daily-limit-warning" style="display: none;"></div>
                            <div class="diario-controls">
                                <button id="btn-toggle-prazo-diario" class="btn btn-light" data-showing="30">+ Mais Prazo</button>
                            </div>
                            <div id="container-diario-table"></div>
                        </div>

                        <span class="validation-message error-message" id="etapa3-validation"></span>
                        <div class="navigation-buttons">
                            <button id="btn-voltar-para-etapa2" class="btn btn-secondary">‚Üê Voltar</button>
                            <button id="btn-ir-para-etapa4" class="btn btn-success" disabled>Ver Resumo ‚Üí</button>
                        </div>
                    </div>
                 </div>
            </div>
            
            <!-- Etapa 4: Resumo -->
            <div id="etapa4" class="etapa">
                <div class="card">
                    <h2 class="card-header">4. Resumo da Simula√ß√£o</h2>
                    <div class="card-body">
                        <div id="resumo-container">
                            <p>Carregando resumo...</p>
                        </div>
                        <div class="navigation-buttons">
                             <button id="btn-voltar-para-etapa3" class="btn btn-secondary">‚Üê Voltar</button>
                            <button id="btn-ir-para-etapa5" class="btn btn-success">Aceitar e Ver Contrato ‚Üí</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Etapa 5: Contrato -->
            <div id="etapa5" class="etapa">
                 <div class="card">
                    <div class="card-body">
                         <div class="info-box warning-message" style="margin-bottom: 1.5rem;">
                             üö® <b>ATEN√á√ÉO:</b> Qualquer pagamento em atraso resultar√° na <b>nega√ß√£o autom√°tica de futuros empr√©stimos</b>. Mantenha seus pagamentos em dia.
                         </div>
                        <div id="contrato-area">
                            <div id="contrato-texto">Carregando termos...</div>
                            <div id="contrato-aceite">
                                <label><input type="checkbox" id="aceito-contrato"> Declaro que li e aceito integralmente os termos e condi√ß√µes.</label>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <button id="btn-voltar-para-etapa4" class="btn btn-secondary">‚Üê Voltar</button>
                            <button id="btn-finalizar-whatsapp" class="btn btn-whatsapp" disabled>Finalizar via WhatsApp</button>
                        </div>
                    </div>
                 </div>
            </div>
        </main>
    </div>

    <!-- Template do Contrato -->
    <template id="contrato-template">
        <h4>CONTRATO DE M√öTUO FINANCEIRO (EMPR√âSTIMO)</h4>
        <p><strong>Data:</strong> [DATA_ORCAMENTO_FORMATADA]</p>
        
        <h4>PARTES ENVOLVIDAS</h4>
        <p><strong>CREDOR (quem empresta):</strong><br>
        Nome: [NOME_COMPLETO_DO_CREDOR]<br>
        CPF/CNPJ: [CPF_CNPJ_DO_CREDOR]<br>
        Contato: [TELEFONE_DO_CREDOR] / [EMAIL_DO_CREDOR]</p>
        
        <p><strong>DEVEDOR (quem pega o empr√©stimo):</strong><br>
        Nome: [NOME_CLIENTE_COMPLETO]<br>
        CPF: [CPF_CLIENTE]</p>
        
        <h4>CL√ÅUSULA 1 ‚Äì O EMPR√âSTIMO</h4>
        <p>O CREDOR empresta ao DEVEDOR a quantia de <strong>[VALOR_SOLICITADO_FORMATADO]</strong>.</p>
        
        <h4>CL√ÅUSULA 2 ‚Äì O PAGAMENTO</h4>
        <p>A forma de pagamento escolhida foi: <strong>[TIPO_PAGAMENTO]</strong>.</p>
        <ul>
            <li id="contrato-parcelado-detalhe">
                Ser√£o <strong>[NUMERO_PARCELAS] parcelas</strong> de <strong>[VALOR_PARCELA_FORMATADO]</strong> cada.<br>
                O primeiro vencimento ser√° em <strong>[DATA_PRIMEIRO_VENCIMENTO_PARCELADO]</strong>.
            </li>
             <li id="contrato-diario-detalhe">
                 O pagamento total de <strong>[VALOR_TOTAL_PAGAMENTO_DIARIO]</strong> deve ser feito at√© <strong>[DATA_ULTIMO_PAGAMENTO_DIARIO]</strong> ([NUMERO_DIAS_DIARIO] dias de prazo).
            </li>
        </ul>
        
        <h4>CL√ÅUSULA 3 ‚Äì MEIOS DE PAGAMENTO</h4>
        <p>O pagamento pode ser feito via PIX (Chave: [CPF_CNPJ_DO_CREDOR]), boleto, ou outro meio combinado previamente.</p>

        <h4>CL√ÅUSULA 4 ‚Äì ENCARGOS POR ATRASO</h4>
        <p>Se o pagamento atrasar, ser√£o cobrados <strong>multa de 20%</strong> e <strong>juros de 10% ao m√™s</strong>, calculados sobre o valor devido e proporcionais aos dias de atraso.</p>
        <p><strong>Exemplo pr√°tico para este empr√©stimo:</strong><br>[EXEMPLO_ATRASO]</p>
        
        <div id="clausula-nota-promissoria">
            <h4>CL√ÅUSULA 5 ‚Äì GARANTIA (NOTA PROMISS√ìRIA)</h4>
            <p>Este empr√©stimo √© garantido por uma Nota Promiss√≥ria, que poder√° ser protestada em caso de n√£o pagamento.</p>
        </div>
        
        <h4>CL√ÅUSULA 6 ‚Äì VALIDADE JUR√çDICA</h4>
        <p>Este documento e as conversas digitais (WhatsApp, etc.) t√™m validade legal e podem ser usados como prova.</p>

        <h4>CL√ÅUSULA 7 ‚Äì ACEITE ELETR√îNICO</h4>
        <p>Ao marcar a caixa de aceite e clicar em "Finalizar via WhatsApp", o DEVEDOR confirma que leu, entendeu e concorda com todas as condi√ß√µes deste contrato, que passa a ter validade imediata.</p>
        
        <p style="text-align: center; margin-top: 20px;">[CIDADE_CONTRATO] - [ESTADO_CONTRATO], [DATA_ORCAMENTO_FORMATADA].</p>
    </template>
    
    <script src="script.js"></script>
</body>
</html>